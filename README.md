# Ferryman-cloud(摆渡人)



####  Spring Cloud + Spring Boot + Vue

环境部署操作
https://blog.csdn.net/weixin_44045059/article/details/121723799

使用阿里云效Devops自动化部署前后端
http://121.5.129.126:8880/#/login

Spring Boot版 https://gitee.com/chongzhe/Ferryboatman-boot

前台前端
[https://gitee.com/chongzhe/Ferryman-blog](http://)

后台前端
[https://gitee.com/chongzhe/Ferryman-admin](http://)

GitHub
[https://github.com/xiaoazhe/Ferryman-cloud](http://)
#### 软件架构



|      后端技术      |           说明            |                             官网                             |
| :------------: | :-----------------------: | :----------------------------------------------------------: |
|   Spring Boot   |          MVC框架          | [ https://spring.io/projects/spring-boot](https://spring.io/projects/spring-boot) |
|  Spring Cloud   |        微服务框架         |           https://spring.io/projects/spring-cloud/           |
|  Spring Cloud Consul	   |        注册中心	         |           https://cloud.spring.io/spring-cloud-consul/reference/html/           |
|  Spring Cloud Hystrix	   |        服务熔断	         |           https://spring.io/projects/spring-cloud/           |
|  Spring Cloud Feign	   |        负载均衡	         |           https://spring.io/projects/spring-cloud-openfeign          |
|  Spring Cloud Ribbon	   |        负载均衡	         |           https://cloud.spring.io/spring-cloud-netflix/multi/multi_spring-cloud-ribbon.html           |
|  Spring Cloud Zuul	   |        服务网关         |           https://spring.io/projects/spring-cloud/           |
|  Spring Cloud Admin	   |        服务监控	         |           https://spring.io/projects/spring-cloud/           |
|  Spring Cloud Config	   |        服务配置中心	         |           https://spring.io/projects/spring-cloud/           |
|  Spring Boot Actuator   |        应用监控	         |          https://docs.spring.io/spring-boot/docs/current/reference/html/actuator.html           |
|  Spring Boot Bus   |        消息总线	         |          https://spring.io/projects/spring-cloud-bus           |
| Spring Security |      认证和授权框架       |          https://spring.io/projects/spring-security          |
|  MyBatis-Plus  |          ORM框架          |                   https://mp.baomidou.com/                   |
|   Swagger-UI   |       文档生产工具        | [ https://github.com/swagger-api/swagger-ui](https://github.com/swagger-api/swagger-ui) |
|    RabbitMQ    |         消息队列          |   [ https://www.rabbitmq.com/](https://www.rabbitmq.com/)    |
|     MySQL	      |        关系数据库	         |                      https://www.mysql.com/                  |
|     MongoDB	      |        分布式文件存储数据库	         |                      https://www.mongodb.org.cn/     |
|     Redis      |        分布式缓存         |                      https://redis.io/                       |
|     Docker     |        容器化部署         |      [ https://www.docker.com](https://www.docker.com/)      |
|     Druid      |       数据库连接池        | [ https://github.com/alibaba/druid](https://github.com/alibaba/druid) |
|     OSS     |     阿里云 - 对象储存     |         https://www.aliyun.com/product/oss/                    |
|     FastDFS     |     分布式文件系统	     |         https://sourceforge.net/projects/fastdfs/        |
|     七牛云     |     七牛云 - 对象储存     |         https://developer.qiniu.com/sdk#official-sdk         |
|      JWT       |        JWT登录支持        |                 https://github.com/jwtk/jjwt                 |
|     SLF4J      |         日志框架          |                    http://www.slf4j.org/                     |
|     Lombok     |     简化对象封装工具      | [ https://github.com/rzwitserloot/lombok](https://github.com/rzwitserloot/lombok) |
|     Nginx      |  HTTP和反向代理web服务器  |                      http://nginx.org/                       |
|     Hutool     |      Java工具包类库       |                  https://hutool.cn/docs/#/                   |
|     Zipkin     |         链路追踪          |             https://github.com/openzipkin/zipkin             |
|     AipFace     |         人脸识别          |             https://cloud.baidu.com/product/face?track=cp:nsem|pf:pc|pp:nsem-chanpin-renlianshibie-xiaoguo|pu:renlianshibie-pinpaici|ci:|kw:10027829&renqun_youhua=2850304             |
|     Mail     |         网易邮箱          |             https://mail.163.com/            |



|         前端技术          |                  说明                   |                             官网                             |
| :-------------------: | :-------------------------------------: | :----------------------------------------------------------: |
|        Vue.js         |                前端框架                 |                      https://vuejs.org/                      |
|      Vue-router       |                路由框架                 |                  https://router.vuejs.org/                   |
|         Vuex          |            全局状态管理框架             |                   https://vuex.vuejs.org/                    |
|        Nuxt.js        |        创建服务端渲染 (SSR) 应用        |                    https://zh.nuxtjs.org/                    |
|        Element        |               前端ui框架                |    [ https://element.eleme.io](https://element.eleme.io/)    |
|         Axios         |              前端HTTP框架               | [ https://github.com/axios/axios](https://github.com/axios/axios) |
|       Vue-Quill-Editor        |              富文本编辑器               |                    https://github.surmon.me/vue-quill-editor/                  |
|     Less      |            CSS 预处理语言             |        http://lesscss.cn/          |
|        Mavon-Editor         |             Markdown编辑器              |             https://github.com/hinesboy/mavonEditor            |
|        Aplayer        |             音乐播放器            |             https://aplayer.js.org/#/            |
|        Vue-i18n        |             国际化            |             https://kazupon.github.io/vue-i18n/zh/introduction.html           |
|        Cookie        |             认证cookie&&缓存            |             https://www.runoob.com/js/js-cookies.html           |



- 系统架构图
![输入图片说明](https://images.gitee.com/uploads/images/2021/0729/175813_2165d07a_2227854.jpeg "FerryMan.jpeg")

- 系统截图
![输入图片说明](https://images.gitee.com/uploads/images/2021/0727/213440_856967bb_2227854.png "屏幕截图.png")
![输入图片说明](https://images.gitee.com/uploads/images/2021/0714/230822_9db8f56f_2227854.png "屏幕截图.png")
![输入图片说明](https://images.gitee.com/uploads/images/2021/0714/230841_fde7a87f_2227854.png "屏幕截图.png")
![输入图片说明](https://images.gitee.com/uploads/images/2021/0714/230902_5422a3de_2227854.png "屏幕截图.png")
![输入图片说明](https://images.gitee.com/uploads/images/2021/0714/230927_2e1c1b56_2227854.png "屏幕截图.png")
![输入图片说明](https://images.gitee.com/uploads/images/2021/0714/230935_411ec941_2227854.png "屏幕截图.png")
![输入图片说明](https://images.gitee.com/uploads/images/2021/0714/231253_e1fa4602_2227854.png "屏幕截图.png")
![输入图片说明](https://images.gitee.com/uploads/images/2021/0714/231811_8f1815ca_2227854.png "屏幕截图.png")
![输入图片说明](https://images.gitee.com/uploads/images/2021/0714/231318_fa3136a8_2227854.png "屏幕截图.png")
![输入图片说明](https://images.gitee.com/uploads/images/2021/0714/231830_57b5c14f_2227854.png "屏幕截图.png")

#### 使用说明

1. windows/MAC安装consul，启动命令  consul agent -dev
    启动 ferry-consul 模块的注册中心 
    启动ferry-config模块
2.  启动 ferry-admin 后台管理模块
3.  启动 ferry-recover 数据备份模块
4.  依次启动 ferry-web（服务提供者1）
、ferry-webBalanced（服务提供者）
、ferry-gossip（服务提供者2）
、ferry-webConsumer（服务消费者）
、ferry-hystrix（熔断器）
、ferry-zuul（网关转发）


#### 提醒
后台音乐模块音乐上传需要搭建容器FDFS文件管理
1，拉取镜像并启动
 
docker run -d --restart=always --privileged=true --net=host --name=fastdfs -e IP=1.116.227.4 -e WEB_PORT=80 -v ${HOME}/fastdfs:/var/local/fdfs registry.cn-beijing.aliyuncs.com/tianzuo/fastdfs
​
其中-v ${HOME}/fastdfs:/var/local/fdfs是指：将${HOME}/fastdfs这个目录挂载到容器里的/var/local/fdfs这个目录里。所以上传的文件将被持久化到${HOME}/fastdfs/storage/data里，IP 后面是自己的服务器公网ip或者虚拟机ip，-e WEB_PORT=80 指定nginx端口
 
 
2，测试上传
 
//进入容器
docker exec -it fastdfs /bin/bash
//创建文件
echo "FastDFS!">index.html
//测试文件上传
fdfs_test /etc/fdfs/client.conf upload index.html

备注：
需要nignx

配置sbin目录的nginx.config
加入 user root;
修改
	listen       80;
        server_name  ip;

	        #charset koi8-r;

        #access_log  logs/host.access.log  main;

        location ~/group1/M00 {
            root  /var/local/fdfs;  #${HOME}/fastdfs:/var/local/fdfs 
            ngx_fastdfs_module;
        }